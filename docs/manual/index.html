<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | pop-api</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="The base modules for popcorn-api"><meta property="og:type" content="website"><meta property="og:url" content="https://popcorntime.sh"><meta property="og:site_name" content="pop-api"><meta property="og:title" content="pop-api"><meta property="og:image" content="https://avatars2.githubusercontent.com/u/7267937"><meta property="og:description" content="The base modules for popcorn-api"><meta property="og:author" content="https://twitter.com/popcorntimetv"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="pop-api"><meta property="twitter:description" content="The base modules for popcorn-api"><meta property="twitter:image" content="https://avatars2.githubusercontent.com/u/7267937"></head>
<body class="layout-container manual-root manual-index" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.png" style="width:34px;"></a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/popcorn-official/pop-api"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/usage.html"><a href="manual/usage.html" data-ice="link">Usage</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/middleware.html"><a href="manual/middleware.html" data-ice="link">Middleware</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/middleware.html"><a href="manual/middleware.html#cli" data-ice="link">Cli</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/middleware.html"><a href="manual/middleware.html#database" data-ice="link">Database</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/middleware.html"><a href="manual/middleware.html#httpserver" data-ice="link">HttpServer</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/middleware.html"><a href="manual/middleware.html#logger" data-ice="link">Logger</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/middleware.html"><a href="manual/middleware.html#routes" data-ice="link">Routes</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/middleware.html"><a href="manual/middleware.html#custom-middleware" data-ice="link">Custom Middleware</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/advanced.html"><a href="manual/advanced.html" data-ice="link">Advanced Usage</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/advanced.html"><a href="manual/advanced.html#mongoose-models" data-ice="link">Mongoose Models</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/advanced.html"><a href="manual/advanced.html#contentservice" data-ice="link">ContentService</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/advanced.html"><a href="manual/advanced.html#controllers" data-ice="link">Controllers</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/advanced.html"><a href="manual/advanced.html#configuration" data-ice="link">Configuration</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/extending-middleware.html"><a href="manual/extending-middleware.html" data-ice="link">Extending Middleware</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/extending-middleware.html"><a href="manual/extending-middleware.html#cli" data-ice="link">Cli</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/extending-middleware.html"><a href="manual/extending-middleware.html#database" data-ice="link">Database</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/extending-middleware.html"><a href="manual/extending-middleware.html#logger" data-ice="link">Logger</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/extending-middleware.html"><a href="manual/extending-middleware.html#routes" data-ice="link">Routes</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/extending-middleware.html"><a href="manual/extending-middleware.html#using-custom-middlewares" data-ice="link">Using Custom Middlewares</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#change-log" data-ice="link">Change Log</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-6-0---v0-6-1--0-6-1--a---2017-12-29-" data-ice="link">0.6.1 (2017-12-29)</a></li>
<li data-ice="manualNav" class="indent-h1" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-5-1---v0-6-0--0-6-0--a---2017-12-27-" data-ice="link">0.6.0 (2017-12-27)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#features" data-ice="link">Features</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-5-0---v0-5-1--0-5-1--a---2017-12-27-" data-ice="link">0.5.1 (2017-12-27)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#bug-fixes" data-ice="link">Bug Fixes</a></li>
<li data-ice="manualNav" class="indent-h1" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-4-1---v0-5-0--0-5-0--a---2017-12-26-" data-ice="link">0.5.0 (2017-12-26)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#features" data-ice="link">Features</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-4-0---v0-4-1--0-4-1--a---2017-12-19-" data-ice="link">0.4.1 (2017-12-19)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#bug-fixes" data-ice="link">Bug Fixes</a></li>
<li data-ice="manualNav" class="indent-h1" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-3-1---v0-4-0--0-4-0--a---2017-12-19-" data-ice="link">0.4.0 (2017-12-19)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#bug-fixes" data-ice="link">Bug Fixes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#features" data-ice="link">Features</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-3-0---v0-3-1--0-3-1--a---2017-12-10-" data-ice="link">0.3.1 (2017-12-10)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#bug-fixes" data-ice="link">Bug Fixes</a></li>
<li data-ice="manualNav" class="indent-h1" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-2-1---v0-3-0--0-3-0--a---2017-12-10-" data-ice="link">0.3.0 (2017-12-10)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#bug-fixes" data-ice="link">Bug Fixes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#features" data-ice="link">Features</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-2-0---v0-2-1--0-2-1--a---2017-12-09-" data-ice="link">0.2.1 (2017-12-09)</a></li>
<li data-ice="manualNav" class="indent-h1" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#-a-href--https---github-com-popcorn-official-pop-api-compare-v0-1-0---v0-2-0--0-2-0--a---2017-12-05-" data-ice="link">0.2.0 (2017-12-05)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#bug-fixes" data-ice="link">Bug Fixes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#features" data-ice="link">Features</a></li>
<li data-ice="manualNav" class="indent-h1" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#0-1-0--2017-11-28-" data-ice="link">0.1.0 (2017-11-28)</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CHANGELOG.html"><a href="manual/CHANGELOG.html#features" data-ice="link">Features</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html" data-ice="link">Contributing</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#raising-issues" data-ice="link">Raising Issues</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#report-a-bug" data-ice="link">Report A Bug</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#feature-requests" data-ice="link">Feature Requests</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#pull-requests" data-ice="link">Pull Requests</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#commit-messages" data-ice="link">Commit Messages</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#styleguides" data-ice="link">Styleguides</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#javascript-styleguide" data-ice="link">JavaScript Styleguide</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#tests-styleguide" data-ice="link">Tests Styleguide</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#documentation-styleguide" data-ice="link">Documentation Styleguide</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#setting-up-for-development" data-ice="link">Setting up for development</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#npm-scripts" data-ice="link">npm scripts</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/CONTRIBUTING.html"><a href="manual/CONTRIBUTING.html#git-hooks" data-ice="link">Git hooks</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/CODE_OF_CONDUCT.html"><a href="manual/CODE_OF_CONDUCT.html" data-ice="link">Contributor Covenant Code of Conduct</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CODE_OF_CONDUCT.html"><a href="manual/CODE_OF_CONDUCT.html#our-pledge" data-ice="link">Our Pledge</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CODE_OF_CONDUCT.html"><a href="manual/CODE_OF_CONDUCT.html#our-standards" data-ice="link">Our Standards</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CODE_OF_CONDUCT.html"><a href="manual/CODE_OF_CONDUCT.html#our-responsibilities" data-ice="link">Our Responsibilities</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CODE_OF_CONDUCT.html"><a href="manual/CODE_OF_CONDUCT.html#scope" data-ice="link">Scope</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CODE_OF_CONDUCT.html"><a href="manual/CODE_OF_CONDUCT.html#enforcement" data-ice="link">Enforcement</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/CODE_OF_CONDUCT.html"><a href="manual/CODE_OF_CONDUCT.html#attribution" data-ice="link">Attribution</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-user-index" data-ice="manualUserIndex"><h1 id="pop-api">pop-api</h1><p><a href="https://travis-ci.org/popcorn-official/pop-api"><img src="https://travis-ci.org/popcorn-official/pop-api.svg?branch=master" alt="Build Status"></a>
<a href="https://ci.appveyor.com/project/ChrisAlderson/pop-api"><img src="https://img.shields.io/appveyor/ci/chrisalderson/pop-api/master.svg?label=windows" alt="Windows Build"></a>
<a href="https://coveralls.io/github/popcorn-official/pop-api?branch=master"><img src="https://coveralls.io/repos/github/popcorn-official/pop-api/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://david-dm.org/popcorn-official/pop-api"><img src="https://david-dm.org/popcorn-official/pop-api.svg" alt="Dependency Status"></a>
<a href="https://david-dm.org/popcorn-official/pop-api?type=dev"><img src="https://david-dm.org/popcorn-official/pop-api/dev-status.svg" alt="devDependencies Status"></a></p>
<h2 id="features">Features</h2><p>The pop-api project aims to provide the core modules for the
<a href="https://github.com/popcorn-official/popcorn-api"><code>popcorn-api</code></a> project, but
can also be used for other purposes by using middleware.</p>
<ul>
<li>Cli middleware for reading user input with <a href="https://github.com/tj/commander.js"><code>commander.js</code></a>.</li>
<li>Database middleware for connection to MongoDB through <a href="https://github.com/Automattic/mongoose"><code>mongoose</code></a>.</li>
<li>Logging of routes and other information using <a href="https://github.com/winstonjs/winston"><code>winston</code></a>.</li>
<li>Uses <a href="https://github.com/expressjs/express"><code>express</code></a> under the hood with:<ul>
<li>Body middleware with <a href="https://github.com/expressjs/body-parser"><code>body-parser</code></a></li>
<li>Error handling</li>
<li>Security middleware with <a href="https://github.com/helmetjs/helmet"><code>helmet</code></a></li>
</ul>
</li>
<li>Interface for registering routes for <a href="https://github.com/expressjs/express"><code>express</code></a>.</li>
<li>Data Access Layer (DAL) class for standard CRUD operations.</li>
<li>Route controller to handle routes for your content.</li>
</ul>
<h2 id="installation">Installation</h2><pre><code><code class="source-code prettyprint"> $ npm install --save pop-api</code>
</code></pre><h2 id="documentation">Documentation</h2><ul>
<li><a href="https://popcorn-official.github.io/pop-api/manual/index.html">General documentation</a></li>
<li><a href="https://popcorn-official.github.io/pop-api/identifiers.html">Api docs</a></li>
<li><a href="https://popcorn-official.github.io/pop-api/manual/usage.html">Usage</a> </li>
<li><a href="https://popcorn-official.github.io/pop-api/manual/middleware.html">Middleware</a> </li>
<li><a href="https://popcorn-official.github.io/pop-api/manual/advanced.html">Advanced Usage</a> </li>
<li><a href="https://popcorn-official.github.io/pop-api/manual/extending-middleware.html">Extending Middleware</a> </li>
</ul>
<h2 id="usage">Usage</h2><p>For your basic setup you have to create a controller which will handle the
routes. Your controller needs to extend from the <code>IController</code> interface to
implement the <code>registerRoutes</code> method which will be called during the setup.</p>
<p>The route controller below will be created with a constructor which takes an
object as the parameter. This example will register a <code>GET /hello</code> route and
sends a JSON object as a response with a greeting to the name provided by the
object from the constructor.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// ./MyRouteController.js
import { IController } from &apos;pop-api&apos;

// Extend your route controller from the &apos;IController&apos; interface.
export default class MyRouteController extends IController {

  // The constructor takes an object as the parameter.
  constructor({name}) {
    super()

    this.name = name
  }

  // Implement the &apos;registerRoutes&apos; method from the &apos;IController interface.
  registerRoutes(router, PopApi) {
    router.get(&apos;/hello&apos;, this.getHello.bind(this))
  }

  // Router middleware to execute on the &apos;GET /hello&apos; route.
  getHello(req, res, next) {
    return res.json({
      message: `Hello, ${this.name}`
    })
  }

}</code>
</code></pre>
<p>To initialize the API we create an array of the route controllers and their
constructor arguments we want to register. Then we just call the <code>init</code> method
with the route controllers array, and the name and version your API (needed for
the Cli). The API should run by default on port <code>5000</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// ./index.js
import { PopApi } from &apos;pop-api&apos;
import MyRouteController from &apos;./MyRouteController&apos;
import { name, version } from &apos;./package.json&apos;

;(async () =&gt; {
  try {
    // Define the controllers you want to use.
    const controllers = [{
      Controller: MyRouteController,  // The controller to register.
      args: {                         // The arguments passed down to the
        name: &apos;John&apos;                  // The additional arguments to pass to
                                      // your route controller.
      }
    }]

    // Initiate your API with the necessary parameters.
    await PopApi.init({                
      controllers,  // The controllers to register.
      name,         // The name of your API.
      version       // The version of your API.
    })
    // API is available on port 5000.
    // GET http://localhost:5000/hello -&gt; { message: &apos;Hello, John&apos; }
  } catch (err) {
    console.log(err)
  }
})()</code>
</code></pre>
<h2 id="license">License</h2><p>MIT License</p>
</div>

  

  <div class="manual-cards">
    
  <div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Usage</h1><p>For your basic setup you have to create a controller which will handle the
routes. Your controller needs to extend from the <code>IController</code> interface to
implement the <code>registerRoutes</code> method which will be called during the setup.</p><p>The route controller below will be created with a constructor which takes an
object as the parameter. This example will register a <code>GET /hello</code> route and
sends a JSON object as a response with a greeting to the name provided by the
object from the constructor.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./MyRouteController.js
import { IController } from &apos;pop-api&apos;

// Extend your route controller from the &apos;IController&apos; interface.
export default class MyRouteController extends IController {

  // The constructor takes an object as the parameter.
  constructor({name}) {
    super()

    this.name = name
  }

  // Implement the &apos;registerRoutes&apos; method from the &apos;IController interface.
  registerRoutes(router, PopApi) {
    router.get(&apos;/hello&apos;, this.getHello.bind(this))
  }

  // Router middleware to execute on the &apos;GET /hello&apos; route.
  getHello(req, res, next) {
    return res.json({
      message: `Hello, ${this.name}`
    })
  }

}</code>
</code></pre><p>To initialize the API we create an array of the route controllers and their
constructor arguments we want to register. Then we just call the <code>init</code> method
with the route controllers array, and the name and version your API (needed for
the Cli). The API should run by default on port <code>5000</code>.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./index.js
import { PopApi } from &apos;pop-api&apos;
import MyRouteController from &apos;./MyRouteController&apos;
import { name, version } from &apos;./package.json&apos;

;(async () =&gt; {
  try {
    // Define the controllers you want to use.
    const controllers = [{
      Controller: MyRouteController,  // The controller to register.
      args: {                         // The arguments passed down to the
        name: &apos;John&apos;                  // The additional arguments to pass to
                                      // your route controller.
      }
    }]

    // Initiate your API with the necessary parameters.
    await PopApi.init({                
      controllers,  // The controllers to register.
      name,         // The name of your API.
      version       // The version of your API.
    })
    // API is available on port 5000.
    // GET http://localhost:5000/hello -&gt; { message: &apos;Hello, John&apos; }
  } catch (err) {
    console.error(err)
  }
})()</code>
</code></pre></div>
        <a data-ice="link" href="manual/usage.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Middleware</h1><ul>
<li><a href="#cli">Cli</a></li>
<li><a href="#database">Database</a></li>
<li><a href="#httpserver">HttServer</a></li>
<li><a href="#logger">Logger</a></li>
<li><a href="#routes">Routes</a></li>
<li><a href="#custom-middleware">Custom Middleware</a></li>
</ul><h2>Cli</h2><p>The <code>Cli</code> middleware uses <a href="https://github.com/tj/commander.js"><code>commander.js</code></a>
modules to parse the input of the user. The middleware itself doesn&apos;t bind
anything to the <code>PopApi</code> instance, instead it parses the input and run the API
accordingly.</p><pre><code class="lang-js"><code class="source-code prettyprint">import { PopApi, Cli, Logger } from &apos;pop-api&apos;
import { name, version } from &apos;./package.json&apos;

const cliOpts = {
  name,               // The name of your application
  version,            // The version of your application
  argv: process.argv  // The arguments to parse
}
PopApi.use(Cli, cliOpts)

// Parsed the input given and binds options for the `Logger` middleware.
// See the documentation for the `Logger` middleware for more options.
const { pretty, quiet } = PopApi.loggerArgs
PopApi.use(Logger, {
  pretty,
  quiet
})</code>
</code></pre><h2>Database</h2><p>The <code>Database</code> middleware bind the <code>database</code> key to the <code>PopApi</code> instance.
This middleware allows you to <code>connect()</code> and <code>disconnect()</code> from MongoDB
through <a href="https://github.com/Automattic/mongoose"><code>mongoose</code></a>, and you can
export and import a collection with the
<code>exportCollection(collection, outputFile)</code> and
<code>importCollection(collection, jsonFile)</code> methods. The example below uses a
<code>.env</code> file to store the optional <code>username</code> and <code>password</code> values to establish
a connection with MongoDB.</p><pre><code class="lang-dosini"><code class="source-code prettyprint"># .env
# (Optional) Assuming you use the `dotenv` modules to get your username and
# password for the database connection
DATABASE_USERNAME=myUsername
DATABASE_PASSWORD=myPassword</code>
</code></pre><p>Now setup the <code>Database</code> middleware:</p><pre><code class="lang-js"><code class="source-code prettyprint">// (Optional) Assuming you use the `dotenv` modules to get your username and
// password for the database connection
import &apos;dotenv/config&apos;
import { PopApi, Database } from &apos;pop-api&apos;
import MyModel from &apos;./MyModel&apos;
import { name } from &apos;./package.json&apos;

const databaseOpts = {
  database: name,                           // The name of the database.
  hosts: [&apos;localhost&apos;],                     // A lst of hosts to connect to.
  dbPort: 27017,                            // (Optional) The port of MongoDB.
  username: process.env.DATABASE_USERNAME,  // (Optional) The username to
                                            // connect to the hosts.
  password: process.env.DATABASE_PASSWORD   // (Optional) The password to
                                            // connect to the hosts.
}
PopApi.use(Database, databaseOpts)

// The database middleware can now be used to connect to the MongoDB database.
PopApi.database.connect()
  .then(() =&gt; {
    // Connection successful!
    return new MyModel({
      _id: &apos;John&apos;,
      name: &apos;John&apos;,
      slug: &apos;john&apos;
    }).save()
  })
  .catch(err =&gt; {
    // Handle error
  })
  .then(() =&gt; {
    // Disconnect from MongoDB.
    PopApi.database.disconnect()
  })</code>
</code></pre><h2>HttpServer</h2><p>The <code>HttpServer</code> middleware forks workers so heavy load process can run on
different child processes. It also makes the
 <a href="https://github.com/expressjs/express"><code>express</code></a> app listen on a port.</p><pre><code class="lang-js"><code class="source-code prettyprint">import { PopApi, HttpServer } from &apos;pop-api&apos;

const httpServerOpts = {
  app: PopApi.app,   // The express instance from PopApi.
  serverPort: 5000,  // The port your API will be running on.
  workers: 2         // The amount of workers to fork.
}
PopApi.use(HttpServer, httpServerOpts)
// Doesn&apos;t bind anything to the PopApi instance, just forks the workers and
// makes the app listen on your configured port.</code>
</code></pre><h2>Logger</h2><p>The <code>Logger</code> middleware uses the
<a href="https://github.com/winstonjs/winston"><code>winston</code></a> module to create a global
<code>logger</code> object. This <code>logger</code> object has various levels to log, such as
<code>debug</code>, <code>info</code>, <code>warn</code> and <code>error</code>. This middleware also binds an
<a href="https://github.com/expressjs/express"><code>express</code></a> middleware function to log
the routes.</p><pre><code class="lang-js"><code class="source-code prettyprint">import { PopApi, Logger } from &apos;pop-api&apos;
import { join } from &apos;path&apos;
import { name } from &apos;./package.json&apos;

const loggerOpts = {
  name,                                 // The name of the log file.
  logDir: join(...[__dirname, &apos;tmp&apos;]),  // The directory to store the logs in.
  pretty: true,                         // (Optional) Pretty output mode.
  quiet: false                          // (Optional) Quiet mode for no output.
}
PopApi.use(Logger, loggerOpts)

logger.info(&apos;\logger\&apos; will be a global object&apos;)
// Other log levels you can use are:
//  - logger.debug()
//  - logger.info()
//  - logger.warn()
//  - logger.error()

// Log middleware for logging routes, used by the `Routes` middleware, or set
// it yourself.
const { httpLogger } = PopApi
PopApi.app.use(httpLogger)</code>
</code></pre><h2>Routes</h2><p>The <code>Routes</code> middleware configures the
<a href="https://github.com/expressjs/express"><code>express</code></a> instance. It sets up the
<a href="https://github.com/expressjs/body-parser"><code>body-parser</code></a> and
<a href="https://github.com/exprssjs/compression"><code>compression</code></a> middleware, as well as
the error and security middleware. Thirdly it registers the controllers with
their routes.</p><pre><code class="lang-js"><code class="source-code prettyprint">import { PopApi, Routes } from &apos;pop-api&apos;
import MyRouteController from &apos;./MyRouteController&apos;

const routesOpts = {
  app: PopApi.app,                  // The express instance from PopApi.
  controllers: [{                   // A list of controllers to register.
    Controller: MyRouteController,  // The controller you want to register.
    args: {}                        // The arguments to pass down to the
                                    // MyRouteController.
  }]
}
PopApi.use(Routes, routesOpts)
// Doesn&apos;t bind anything to the PopApi instance, just configures the middleware
// for express and registers the controllers.</code>
</code></pre><h2>Custom Middleware</h2><p>The <code>init</code> method will register the default Cli, Database, Logger, Routes and
Server middleware, but you can also extends the functionality of <code>pop-api</code> by
using your own middleware. In the middleware example below we create a
middleware class which will only hold a simple greeting.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./MyMiddleware.js
export default class MyMiddleware {

  // The first parameter will be the &apos;PopApi&apos; instance, the second will be an
  // object you can use to configure your middleware.
  constructor(PopApi, {name}) {
    this.name = name

    PopApi.myMiddleware = this.myMiddleware()
  }

  myMiddleware() {
    return `Hello, ${this.name}`
  }

}</code>
</code></pre><p>To use the middleware we created you call the <code>use</code> method. The first parameter
will be the middleware class you want to create, the second parameter is
optional, but can be used to configure your middleware.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./index.js
import { PopApi } from &apos;pop-api&apos;
import MyMiddleware from &apos;./MyMiddleware&apos;

// Use the middleware you created.
PopApi.use(MyMiddleware, {
  name: &apos;John&apos;
})

// The middleware will be bound to the &apos;PopApi&apos; instance.
const greeting = PopApi.myMiddleware
console.log(greeting) // Hello, John</code>
</code></pre></div>
        <a data-ice="link" href="manual/middleware.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Advanced Usage</h1><p>The advanced setup has some more options to setup your API in regards with
the database connection and the port your API will be listening on. But also
how you can serve content through built-in route controllers as well as how to
extend the built-in route controllers.</p><ul>
<li><a href="#mongoose-models">Mongoose Models</a></li>
<li><a href="#contentservice">ContentService</a></li>
<li><a href="#controllers">Controllers</a></li>
<li><a href="#configuration">Configuration</a></li>
</ul><h2>Mongoose Models</h2><p>For the advanced setup we will create a model using
<a href="https://github.com/Automattic/mongoose"><code>mongoose</code></a> and a route controller
extending from <code>BaseContentController</code>. Below we create a simple
<a href="https://github.com/Atomattic/mongoose"><code>mongoose</code></a> model.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./myModel.js
import mongoose, { Schema } from &apos;mongoose&apos;

// Create a simple mongoose schema.
const mySchema =  new Schema({
  _id: {
    type: String,
    required: true,
    index: {
      unique: true
    }
  },
  slug: {
    type: String,
    required: true
  },
  name: {
    type: String,
    required: true
  }
})

// Create a model from the schema.
export default mongoose.model(&apos;MyModel&apos;, mySchema)</code>
</code></pre><h2>ContentService</h2><p>Before we create a route controller we need a <code>ContentService</code> object which
ats as the DAL for the CRUD operations. The <code>ContentService</code> object will be
used as a parameter when creating the route controller.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./myService.js
import { ContentService } from &apos;pop-api&apos;
import MyModel from &apos;./myModel&apos;

const myService = new ContentService({
  Model: MyModel,           // The model for the service.
  projection: { name: 1 },  // Projection used to display multiple items.
  query: {}                 // (Optional) The default query to fetch items.
})

// Methods available:
// - myService.getContents([base])
// - myService.getPage([sort, page, query])
// - myService.getContent(id, [projection])
// - myService.createContent(obj)
// - myService.createMany(arr)
// - myService.updateContent(id, obj)
// - myService.updateMany(arr)
// - myService.deleteContent(id)
// - myService.deleteMany(arr)
// - myService.getRandomContent()

export default myService</code>
</code></pre><p>Now we create a route controller which extends from <code>BaseContentController</code>.
This route controller can be used on it&apos;s own or classes can extend from it to
implement new behaviour or override existing behaviour. The
<code>BaseContentController</code> class already implements the <code>registerRoutes</code> method
from <code>IController</code> and adds the following routes to your API (note the base
path will be taken from the <code>basePath</code> value of your route controller):</p><ul>
<li>GET    <code>/examples</code>        Get a list of a available pages to get.</li>
<li>GET    <code>/examples/:page</code>  Get a page of models.</li>
<li>GET    <code>/example/:id</code>     Get a single model.</li>
<li>POST   <code>/examples</code>        Create a new model.</li>
<li>PUT    <code>/example/:id</code>     Update an existing model.</li>
<li>DELETE <code>/example/:id</code>     Delete a model.</li>
<li>GET    <code>/random/example</code>  Get a random model.</li>
</ul><h2>Controllers</h2><p>The following example extends from <code>BaseContentController</code>, registers the default
routes and implements a <code>GET /hello</code> route.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./MyRouteController.js
import { BaseContentController } from &apos;pop-api&apos;

// Extend from the `BaseContentController` which has defaults methods for CRUD
// operations.
export default class MyRouteController extends BaseContentController {

  // The constructor of `BaseContentController` needs an instance of
  // `ContentService` which we will create later. It can also take additional
  // parameters for your own implementation.
  constructor({basePath, service, name}) {
    // binds: this.baseBath and this.service.
    super({basePath, service})

    this.name = name
  }

  // Implement the &apos;registerRoutes&apos; method from the &apos;IController interface.
  registerRoutes(router, PopApi) {
    // Call the `registerRoutes` method from the `BaseContentController` class
    // to register the default routes.
    super.registerRoutes(router, PopApi)

    // And add additional routes for your route controller.
    router.get(&apos;/hello&apos;, this.getHello.bind(this))
  }

  // Router middleware to execute on the &apos;GET /hello&apos; route.
  getHello(req, res, next) {
    return res.json({
      message: `Hello, ${this.name}`
    })
  }

}</code>
</code></pre><h2>Configuration</h2><p>Now to initial your API we create a list of route controllers we want to
register with their constructor parameters. This example also shows additional
parameters to pass down to the <code>init</code> method of the <code>PopApi</code> instance.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./index.js
import express from &apos;express&apos;
import { PopApi, ContentService } from &apos;pop-api&apos;
import { join } from &apos;path&apos;
import MyRouteController from &apos;./MyRouteController&apos;
import myService from &apos;./myService&apos;
import { name, version } from &apos;./package.json&apos;

;(async () =&gt; {
  try {
    // Define the controllers you want to use.
    const controllers = [{
      Controller: MyRouteController,  // The controller to register.
      args: {                         // The arguments passed down to the
                                      // constructor of the controller.
        basePath: &apos;example&apos;,          // The base path to register the routes
                                      // to.
        service: myService,           // The content service for the
                                      // BaseContentController.
        name: &apos;John&apos;                  // The additional arguments to pass to
      }                               // your route controller.
    }]

    // Initiate your API with optional parameters.
    await PopApi.init({
      app: express(),          // The express instance  to use.
      controllers,             // The controllers to register.
      name,                    // The name of your API.
      version,                 // The version of your API.
      logDir: join(...[        // (Optional) The directory to store the log
        __dirname,             // files in. Defaults to `./tmp`.
        &apos;..&apos;,
        &apos;tmp&apos;
      ]),
      hosts: [&apos;11.11.11.11&apos;],  // (Optional) The hosts to connect to for
                               // MongoDB. Defaults to `[&apos;localhost&apos;]`.
      dbPort: 27019,           // (Optional) The port of MongoDB to connect to
                               // Defaults to `27017`.
      username: &apos;myUsername&apos;,  // (Optional) The username to connect to.
                               // MongoDB. Defaults to `null`.
      password: &apos;myPassword&apos;,  // (Optional) The password to connect to.
                               // MongoDB. Defaults to `null`.
      serverPort: 8080,        // (Optional) The port to run your API on.
                               // Defaults to `5000`.
      workers: 4               // The amount of workers to fork for the server.
                               // Defaults to `2`.
    }, [                       // (Optional) A list of middlewares to register.
      // Cli,                  // Defaults to:
      // Logger,               //  [Cli, Logger, Database, Routes, HtttpServer]
      // Database,
      // Routes,
      // HttpServer
    ])
    // API is available on port 8080.

    // GET http://localhost:8080/hello
    // { &quot;message&quot;: &quot;Hello, John&quot; }

    // GET http://localhost:8080/examples
    // [&quot;/examples/1&apos;, &quot;/examples/2&quot;]

    // GET http://localhost:8080/examples/1
    // [
    //   { &quot;_id&quot;: &quot;578df3efb618f5141202a196&quot;, &quot;name&quot;: &quot;John&quot; },
    //   { &quot;_id&quot;: &quot;578df3efb618f5141202a196&quot;, &quot;name&quot;: &quot;Mary&quot; }
    // ]

    // GET http://localhost:8080/example/578df3efb618f5141202a196
    // { &quot;_id&quot;: &quot;578df3efb618f5141202a196&quot;, &quot;name&quot;: &quot;John&quot;, &quot;slug&quot;: &quot;john&quot; }

    // POST http://localhost:8080/examples
    // body: { &quot;name&quot;: &quot;Mary&quot;, &quot;slug&quot;: &quot;mary&quot; }
    // { &quot;_id&quot;: &quot;578df3efb618f5141202a196&quot;, &quot;name&quot;: &quot;Mary&quot;, &quot;slug&quot;: &quot;mary&quot; }

    // PUT http://localhost:8080/example/578df3efb618f5141202a196
    // body: { &quot;name&quot;: &quot;James&quot;, &quot;slug&quot;: &quot;james&quot; }
    // { &quot;_id&quot;: &quot;578df3efb618f5141202a196&quot;, &quot;name&quot;: &quot;James&quot;, &quot;slug&quot;: &quot;james&quot; }

    // DELETE http://localhost:8080/example/578df3efb618f5141202a196
    // { &quot;_id&quot;: &quot;578df3efb618f5141202a196&quot;, &quot;name&quot;: &quot;James&quot;, &quot;slug:&quot; :james&quot; }

    // GET http://localhost:8080/random/example -&gt; { }
    // { &quot;_id&quot;: &quot;578df3efb618f5141202a196&quot;, &quot;name&quot;: &quot;Mary&quot;, &quot;slug&quot;: &quot;mary&quot; }
  } catch (err) {
    console.error(err)
  }
})()</code>
</code></pre></div>
        <a data-ice="link" href="manual/advanced.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Extending Middleware</h1><p>The behaviour of the default middlewares can be overwritten or extended by
creating a new class which extends from the base middleware class. This section
will look into how you can do this for your own project.</p><ul>
<li><a href="#cli">Cli</a></li>
<li><a href="#database">Database</a></li>
<li><a href="#logger">Logger</a></li>
<li><a href="#routes">Routes</a></li>
<li><a href="#using-custom-middlewares">Using Custom Middlewares</a></li>
</ul><h2>Cli</h2><p>The <code>CLi</code> middleware uses <a href="https://github.com/tj/commander"><code>commander.js</code></a> for
parsing the command line input. The following example overrides the
<code>initOptions</code> method to add additional options for your cli middleware. It also
overrides the <code>getHelp</code> method to add an example which will be printed wiith
the <code>--help</code> flag. Lastly it overrides the <code>run</code> method which parses the cli
input and runs the prrogram based on the input.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./middlewares/MyCli.js
import { Cli } from &apos;pop-api&apos;

export default class MyCli extends Cli {

  /**
   * @override
   */
  constructor(PopApi, {argv, name, version, myCliOption}) {
    // Do not pass down the &apos;argv&apos; key so it does not get parsed by commander.
    super(PopApi, {name, version})

    // Bind our option to the instance.
    this.myCliOption = myCliOption

    // Run the Cli middleware.
    this.run(PopApi, argv)
  }

  /**
   * @override
   */
  initOptions() {
    // First initiate the options from the base Cli middleware.
    super.initOptions()

    // Now you can add your own options.
    return this.program
      .option(&apos;--my-option&apos;, &apos;My awesome option&apos;)
  }

  /**
   * @override
   */
  getHelp() {
    // Get the help message from the base Cli middleware.
    const baseHelp = super.getHelp()

    // And add your own message for your options.  
    return baseHelp.concat([
      `    $ ${this.name} --my-option`
    ])
  }

  // Method ot be executed when the `--my-option` flag is set.
  runMyOption() {
    console.log(`Executing my awesome option: ${this.myCliOption}`)
  }

  /**
   * @override
   */
  run(PopApi, argv) {
    // Now we parse the options.
    this.program.parse(argv)

    // Check the use input if your option flag has been filled.
    if (this.program.myOption) {
      return this.runMyOption()
    }

    // Run any other input options from the base Cli middleware.
    return super.run(PopApi)
  }

}</code>
</code></pre><h3>Database</h3><p>By default the <code>Database</code> middleware uses
<a href="https://github.com/Automattic/mongoose"><code>mongoose</code></a> to create a Connection to
MongoDB. For this example we will create a MySQL connection with the
<a href="https://github.com/mysqljs/mysql"><code>mysql</code></a> module. It overrides the <code>connect</code>
and <code>disconnect</code> methods to establish and end a connection.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./middlewares/MySqlDatabase.js
import mysql from &apos;mysql&apos;
import { Database } from &apos;pop-api&apos;

export default class MySqlDatabase extends Database {

  /**
   * @override
   */
  constructor(PopApi: any, {
    database,
    hosts = [&apos;localhost&apos;],
    dbPort = 3306,
    username,
    password
  }) {
    super(PopApi, {
      database,
      hosts,
      dbPort,
      username,
      password
    })

    // Bind the connection to the instance to connect and disconnect.
    this.connection = mysql.createConnection({
      host: this.hosts[0],
      user: this.username,
      password: this.password,
      database: this.database,
      port: this.dbPort
    })
    // Set the database middleware as an instance of MySqlDatabase.
    PopApi.database = this
  }

  /**
   * @override
   */
  connect()  {
    return new Promise((resolve, reject) =&gt; {
      return this.connection
        .connect(err =&gt; err ? reject(err) : resolve(&apos;Connected&apos;))
    })
  }

  /**
   * @override
   */
  disconnect() {
    return new Promise(resolve =&gt; this.connection.end())
  }

}</code>
</code></pre><h3>Logger</h3><p>The <code>Logger</code> middleware uses <a href="https://github.com/winstonjs/winston"><code>winston</code></a>
by default as a logger. Here we will extend the default logger middleware to
use <a href=""><code>pino</code></a>. We override the <code>createLoggerInstance</code> to create an instance of
<code>pino</code> and override the <code>consoleFormatter</code> to use as a formatter function for
<code>pino</code>.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./middlewares/PinoLogger.js
import pino from &apos;pino&apos;
import { join } from &apos;path&apos;
import { Logger } from &apos;pop-api&apos;
import { sprintf } from &apos;sprintf-js&apos;

export default class PinoLogger extends Logger {

  /**
   * @override
   */
  consoleFormatter(args) {
    const level = pino.levels.labels[args.level]
    const color = this.getLevelColor(level)

    return sprintf(
      `\x1b[0m[%s] ${color}%5s:\x1b[0m %2s/%d: \x1b[36m%s\x1b[0m`,
      new Date(args.time).toISOString(),
      level.toUpperCase(),
      this.name,
      args.pid,
      args.msg
    )
  }

  /**
   * @override
   */
  createLoggerInstance(suffix, pretty) {
    // Let the http logger middleware be handled by the base Logger middleware.
    if (suffix === &apos;http&apos;) {
      return super.createLoggerInstance(suffix, pretty)
    }

    const prettyPino = pino.pretty({
      // Or don&apos;t use a formatter at all.
      formatter: this.consoleFormatter.bind(this)
    })
    prettyPino.pipe(process.stdout)

    // Create our logger object.
    return pino({
      name: `${this.name}-${suffix}`,
      safe: true
    }, prettyPino)
  }

}</code>
</code></pre><h3>Routes</h3><p>The default web framework used by the <code>Routes</code> middleware is
<a href="https://github.com/expressjs/express"><code>express</code></a>. For this example we will
extend the <code>Routes</code> middleware to use
<a href="https://github.com/restify/node-restify"><code>restfy</code></a> as the web framework. For
this we will override the <code>preRoutes</code> method to use middleware for <code>restify</code>
instead of <code>express</code>.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./middlewares/RestifyRoutes.js
import helmet from &apos;helmet&apos;
import restify from &apos;restify&apos;
import { Routes } from &apos;pop-api&apos;

export default class RestifyRoutes extends Routes {

  /**
   * @override
   */
  preRoutes(app) {
    // Register the middleware plugins for Restify.
    app.use(restify.plugins.bodyParser())
    app.use(restify.plugins.queryParser())
    app.use(restify.plugins.gzipResponse())

    // Use helmet middleware or any other for Restify.
    app.use(helmet())
    app.use(helmet.contentSecurityPolicy({
      directives: {
        defaultSrc: [&apos;\&apos;none\&apos;&apos;]
      }
    }))
    app.use(this.removeServerHeader)
  }

}</code>
</code></pre><h2>Using Custom Middlewares</h2><p>The &apos;init&apos; method  can take a list of middlewares as a second parameter. This
list of middlewares will be used by the PopApi instance. All the middlewares
will be initiated with options from the &apos;init&apos; method, so you can add
additional options to your middleware.</p><pre><code class="lang-js"><code class="source-code prettyprint">// ./index.js
import restify from &apos;restify&apos;
import { PopApi, HttpServer, utils } from &apos;pop-api&apos;

import {
  MyCli,
  MySqlDatabase,
  PinoLogger,
  RestifyRoutes
} from &apos;./middlewares&apos;
import { name, version } from &apos;../package.json&apos;

(async () =&gt; {
  try {
    await PopApi.init({
      name,
      version,
      myCliOption,
      ...
    }, [
      MyCli, // Will be initiated with additional &apos;myCliOption&apos; value.
      PinoLogger,
      MySqlDatabase,
      RestifyRoutes,
      HttpServer
    ])
  } catch (err) {
    console.error(err)
  }
})()</code>
</code></pre></div>
        <a data-ice="link" href="manual/extending-middleware.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>0.1.0 (2017-11-28)</h1><h3>Features</h3><ul>
<li><strong>initial-release:</strong> Initial release for npm registry (<a href="https://github.com/popcorn-official/pop-api/commit/c5269e7">c5269e7</a>)</li>
</ul></div>
        <a data-ice="link" href="manual/CHANGELOG.html#0-1-0--2017-11-28-"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Contributing</h1><p>So you&apos;re interested in giving us a hand? That&apos;s awesome! We&apos;ve put together
some brief guidelines that should help you get started quickly and easily.</p><p>There are lots and lots of ways to get involved, this document covers:</p><ul>
<li><a href="#raising-issues">Raising Issues</a><ul>
<li><a href="#report-a-bug">Report  A Bug</a></li>
<li><a href="#feature-requests">Feature Requests</a></li>
<li><a href="#pull-requests">Pull Requests</a></li>
</ul>
</li>
<li><a href="#commit-messages">Commit Messages</a></li>
<li><a href="#styleguides">Styleguides</a><ul>
<li><a href="#javascript-styleguide">JavaScript Styleguide</a></li>
<li><a href="#tests-styleguide">Tests Styleguide</a></li>
<li><a href="#documentation-styleguide">Documentation Styleguide</a></li>
</ul>
</li>
<li><a href="#setting-up-for-development">Setting up for development</a><ul>
<li><a href="#npm-scripts">npm scripts</a></li>
<li><a href="#git-hooks">Git hooks</a></li>
</ul>
</li>
</ul><h2>Raising Issues</h2><p>If you&apos;re about to raise an issue because you think that you&apos;ve found a problem
with the application, or you&apos;d like to make a request for a new feature in the
codebase, or any other reason&#x2026; please read this first.</p><p>The GitHub issue tracker is the preferred channel for
<a href="#report-a-bug">bug reports</a>, <a href="#feature-requests">feature requests</a>, and
<a href="#pull-requests">pull requests</a> but respect the following restrictions:</p><ul>
<li>Please <strong>do not</strong> use the issue tracker for personal support requests.</li>
<li>Please <strong>do not</strong> derail or troll issues. Keep the discussion on topic and
respect the opinions of others.</li>
</ul><h3>Report A Bug</h3><p>A bug is a <em>demonstrable problem</em> that is caused by the code in the repository.
Good bug reports are extremely helpful - thank you!</p><p>Guidelines for bug reports:</p><ol>
<li><strong>Use the GitHub issue search</strong> &#x2014; check if the issue has already been
reported.</li>
<li><strong>Check if the issue has been fixed</strong> &#x2014; try to reproduce it using the
latest <code>master</code> or look for <a href="https://github.com/popcorn-official/pop-api/issues?q=is%3Aissue+is%3Aclosed">closed issues</a>.</li>
<li><strong>Include a screencast if relevant</strong> - Is your issue about a design or front
end feature or bug? The most helpful thing in the world is if we can <em>see</em> what
you&apos;re talking about. Just drop the picture after writing your issue, it&apos;ll be
uploaded and shown to the developers.</li>
<li>Use the Issue tab on GitHub to start <a href="https://github.com/popcorn-official/pop-api/issues/new">creating a bug report</a>.
A good bug report shouldn&apos;t leave others needing to chase you up for more
information. Be sure to include all the possible required details and the steps
to take to reproduce the issue.</li>
</ol><h3>Feature Requests</h3><p>Feature requests are welcome. Before you submit one be sure to:</p><ol>
<li><strong>Use the <a href="https://github.com/popcorn-official/pop-api/issues">GitHub Issues search</a></strong>
and check the feature hasn&apos;t already been requested.</li>
<li>Take a moment to think about whether your idea fits with the scope and aims
of the project, or if it might better fit being an app/plugin.</li>
<li>Remember, it&apos;s up to <em>you</em> to make a strong case to convince the project&apos;s
leaders of the merits of this feature. Please provide as much detail and
context as possible, this means explaining the use case and why it is likely to
be common.</li>
<li>Clearly indicate whether this is a feature request for the application
itself, or for packages like Providers, Metadatas, or other.</li>
</ol><h3>Pull Requests</h3><p>Pull requests are awesome. If you&apos;re looking to raise a PR for something which
doesn&apos;t have an open issue, please think carefully about
<a href="#report-a-bug">raising an issue</a> which your PR can close, especially if you&apos;re
fixing a bug. This makes it more likely that there will be enough information
available for your PR to be properly tested and merged. To make sure your PR is
accepted as quickly as possible, you should be sure to have read all the
guidelines on:</p><ul>
<li><a href="#commit-messages">Commit Messages</a></li>
<li><a href="#styleguides">Stylesguides</a></li>
</ul><h2>Commit Messages</h2><p>This project uses the <a href="https://conventionalcommits.org/">Conventional Commits</a>
convention. If you are not familiar with this convention please read about it
first before creating a commit message or a PR.</p><h2>Styleguides</h2><h3>JavaScript Styleguide</h3><p>All JavaScript must adhere to <a href="http://standardjs.com/">JavaScript Standard Style</a>.</p><ul>
<li><p>Inline <code>export</code>s with expressions whenever possible</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// Use this:
export default class ClassName {

}

// Instead of:
class ClassName {

}
export default ClassName</code>
</code></pre>
</li>
</ul><h3>Tests Styleguide</h3><ul>
<li>Include thoughtfully-worded, well-structured <a href="https://mochajs.org/">Mocha</a> tests in the <code>./test</code> folder.</li>
<li>Treat <code>describe</code> as a noun or situation.</li>
<li>Treat <code>it</code> as a statement about state or how an operation changes state.</li>
</ul><h3>Documentation Styleguide</h3><ul>
<li>Use <a href="https://daringfireball.net/projects/markdown">Markdown</a>.</li>
<li>Reference methods and classes in markdown with the custom <code>{}</code> notation:<ul>
<li>Reference classes with <code>{ClassName}</code></li>
<li>Reference instance methods with <code>{ClassName.methodName}</code></li>
<li>Reference class methods with <code>{ClassName#methodName}</code></li>
</ul>
</li>
</ul><h2>Setting up for development</h2><p>To setup your local machine to start working on the project you can follow these
steps:</p><ol>
<li>Install <a href="https://www.mongodb.com/">MongoDB</a> including <code>mongoexport</code> and <code>mongoimport</code></li>
<li>Install <a href="https://nodejs.org/">NodeJS</a> (at least Node v7.10.1 or greater)</li>
<li>Clone the repository with: <code>git clone https://github.com/popcorn-official/pop-api.git</code></li>
<li>Install dependencies <code>npm i</code></li>
<li>Install the flow-typed libraries with <code>npm run flow-typed</code></li>
</ol><h3>npm scripts</h3><p>The following <a href="https://docs.npmjs.com/misc/scripts"><code>npm-scripts</code></a> are available in order to help you with the
development of the project.</p><pre><code><code class="source-code prettyprint"> $ npm run build    # Transform the code with &apos;babel&apos;
 $ npm run docs     # Generate the documentation with &apos;esdoc&apos;
 $ npm run debug    # Run the applicaiton in debug mode
 $ npm run dev      # Run the application in development mode
 $ npm run flow     # Check flow typings
 $ npm run lint     # Check javascript style
 $ npm run test     # Run unit tests</code>
</code></pre><h3>Git hooks</h3><p>The following <code>git</code> hooks are available to ensure the changes you are about to
make follow the <a href="#styleguides">styleguides</a> and make sure your changes pass the
tests.</p><pre><code><code class="source-code prettyprint">pre-commit          # npm run lint &amp;&amp; npm run flow
pre-push            # npm run test</code>
</code></pre></div>
        <a data-ice="link" href="manual/CONTRIBUTING.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Contributor Covenant Code of Conduct</h1><ul>
<li><a href="#our-pledge">Our Pledge</a></li>
<li><a href="#our-standards">Our Standards</a></li>
<li><a href="#our-responsibilities">Our Responsibilities</a></li>
<li><a href="#scope">Scope</a></li>
<li><a href="#enforcement">Enforcement</a></li>
<li><a href="#attribution">Attribution</a></li>
</ul><h2>Our Pledge</h2><p>In the interest of fostering an open and welcoming environment, we as
contributors and maintainers pledge to making participation in our project and
our community a harassment-free experience for everyone, regardless of age,
body size, disability, ethnicity, gender identity and expression, level of
experience, nationality, personal appearance, race, religion, or sexual
identity and orientation.</p><h2>Our Standards</h2><p>Examples of behavior that contributes to creating a positive environment
include:</p><ul>
<li>Using welcoming and inclusive language</li>
<li>Being respectful of differing viewpoints and experiences</li>
<li>Gracefully accepting constructive criticism</li>
<li>Focusing on what is best for the community</li>
<li>Showing empathy towards other community members</li>
</ul><p>Examples of unacceptable behavior by participants include:</p><ul>
<li>The use of sexualized language or imagery and unwelcome sexual attention or advances</li>
<li>Trolling, insulting/derogatory comments, and personal or political attacks</li>
<li>Public or private harassment</li>
<li>Publishing others&apos; private information, such as a physical or electronic address, without explicit permission</li>
<li>Other conduct which could reasonably be considered inappropriate in a professional setting</li>
</ul><h2>Our Responsibilities</h2><p>Project maintainers are responsible for clarifying the standards of acceptable
behavior and are expected to take appropriate and fair corrective action in
response to any instances of unacceptable behavior.</p><p>Project maintainers have the right and responsibility to remove, edit, or
reject comments, commits, code, wiki edits, issues, and other contributions
that are not aligned to this Code of Conduct, or to ban temporarily or
permanently any contributor for other behaviors that they deem inappropriate,
threatening, offensive, or harmful.</p><h2>Scope</h2><p>This Code of Conduct applies both within project spaces and in public spaces
when an individual is representing the project or its community. Examples of
representing a project or community include using an official project e-mail
address, posting via an official social media account, or acting as an
appointed representative at an online or offline event. Representation of a
project may be further defined and clarified by project maintainers.</p><h2>Enforcement</h2><p>Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported by contacting the project team at <code>hello@popcorntime.sh</code>. The
project team will review and investigate all complaints, and will respond in a
way that it deems appropriate to the circumstances. The project team is
obligated to maintain confidentiality with regard to the reporter of an
incident. Further details of specific enforcement policies may be posted
separately.</p><p>Project maintainers who do not follow or enforce the Code of Conduct in good
faith may face temporary or permanent repercussions as determined by other
members of the project&apos;s leadership.</p><h2>Attribution</h2><p>This Code of Conduct is adapted from the Contributor Covenant, version 1.4,
available at <a href="http://contributor-covenant.org/version/1/4">http://contributor-covenant.org/version/1/4</a></p></div>
        <a data-ice="link" href="manual/CODE_OF_CONDUCT.html"></a>
      </div>
    </div>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
